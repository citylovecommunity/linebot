{% extends "base.html" %}


{% block title %}
æäº¤åœ°é»
{% endblock %}




{% block content %}
<h2 class="card-title mb-4">{{dating_title}}</h2>

<p>
    {{first_word | safe}}
</p>
<form method="post" action="{{ post_to }}">

    <!-- åœ°é» Section -->
    <div class="mb-3" id="place-section">
        <div class="section-header">
            <label class="form-label">åœ°é» Google Maps é€£çµ</label>
            {% if lock %}
            <button type="button" class="btn btn-outline-secondary lock-btn"
                onclick="toggleSectionLock('place-section', this)">ğŸ”’</button>
            {% endif %}
        </div>

        {% for i in range(1, 3) %}
        <input type="url" class="form-control {% if i == 1 %}mb-2{% endif %}" id="place{{ i }}" name="place{{ i }}"
            required {% if lock %} readonly {% endif %}
            value="{{ session['confirm_data']['place' ~ i ~ '_url'] if session.get('confirm_data') else '' }}">
        {% endfor %}


    </div>

    <!-- æ™‚é–“ Section -->
    <div class="mb-3" id="time-section">
        <div class="section-header">
            <label class="form-label">é¸æ“‡ä¸‰å€‹æ™‚é–“</label>
            {% if lock %}
            <button type="button" class="btn btn-outline-secondary lock-btn"
                onclick="toggleSectionLock('time-section', this)">ğŸ”’</button>
            {% endif %}
        </div>
        {% for i in range(1, 4) %}
        <input type="datetime-local" class="form-control mb-2" id="time{{ i }}" name="time{{ i }}" required {% if lock
            %} readonly {% endif %}
            value="{{ session['confirm_data']['time' ~ i] if session.get('confirm_data') else '' }}">
        {% endfor %}
    </div>
    <p>
        {{second_word | safe}}
    </p>
    <!-- ç•™è¨€ Section (no lock) -->
    <div class="mb-3">
        <label for="comment" class="form-label">ç•™è¨€çµ¦å°æ–¹ï¼ˆé¸å¡«ï¼‰</label>
        <textarea class="form-control" id="comment" name="comment" rows="3"
            placeholder="è¼¸å…¥æ‚¨æƒ³å°å°æ–¹èªªçš„è©±...">{{ session['confirm_data']['comment'] if session.get('confirm_data') else '' }}</textarea>
    </div>

    <!-- æäº¤æŒ‰éˆ• -->
    <div class="text-center">
        <button type="submit" class="btn btn-success me-2">ç¢ºèªé€å‡º</button>
        {% if go_back_url %}
        <a href="{{ go_back_url }}" class="btn btn-outline-secondary">è¿”å›ä¸Šé </a>
        {% endif %}
    </div>
</form>

{% if lock %}
<script>
    function toggleSectionLock(sectionId, btn) {
        const section = document.getElementById(sectionId);
        const inputs = section.querySelectorAll('input');
        const isLocked = inputs[0].hasAttribute('readonly');

        inputs.forEach(input => {
            if (isLocked) {
                input.removeAttribute('readonly');
            } else {
                input.setAttribute('readonly', true);
            }
        });

        btn.textContent = isLocked ? 'ğŸ”“' : 'ğŸ”’';
    }
</script>
{% endif %}

{% endblock %}